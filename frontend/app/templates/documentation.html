<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentación - Tecnologías Chapinas</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-slate-900 text-slate-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="mb-8">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center space-x-4">
            <a
              href="{% url 'help' %}"
              class="text-blue-400 hover:text-blue-300 transition-colors"
            >
              <svg
                class="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 19l-7-7m0 0l7-7m-7 7h18"
                />
              </svg>
            </a>
            <h1 class="text-3xl font-bold text-slate-100">
              Documentación del Sistema
            </h1>
          </div>
          <div class="flex items-center space-x-2">
            <svg
              class="w-8 h-8 text-blue-400"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
              />
            </svg>
          </div>
        </div>
        <p class="text-slate-400">
          Guía completa de uso del Sistema de Facturación de Nube
        </p>
      </div>

      <!-- Table of Contents -->
      <div
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2 class="text-xl font-semibold text-slate-100 mb-4">Contenidos</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <a
            href="#introduccion"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >1. Introducción</a
          >
          <a
            href="#arquitectura"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >2. Arquitectura</a
          >
          <a
            href="#funcionalidades"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >3. Funcionalidades</a
          >
          <a
            href="#api"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >4. API Endpoints</a
          >
          <a
            href="#formatos"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >5. Formatos XML</a
          >
          <a
            href="#reportes"
            class="text-blue-400 hover:text-blue-300 transition-colors"
            >6. Reportes PDF</a
          >
        </div>
      </div>

      <!-- 1. Introducción -->
      <div
        id="introduccion"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span>1. Introducción</span>
        </h2>
        <div class="text-slate-300 space-y-3">
          <p>
            El Sistema de Facturación de Nube de
            <strong class="text-slate-100">Tecnologías Chapinas, S.A.</strong>
            es una herramienta diseñada para gestionar y facturar servicios de
            infraestructura en la nube de manera detallada y precisa.
          </p>
          <p>
            El sistema permite administrar recursos tecnológicos (CPU, RAM,
            almacenamiento, etc.), crear configuraciones personalizadas,
            gestionar clientes e instancias, y generar facturas basadas en el
            consumo real de recursos.
          </p>
          <div
            class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mt-4"
          >
            <h4 class="font-semibold text-blue-300 mb-2">Objetivo Principal</h4>
            <p class="text-sm text-blue-200">
              Automatizar el proceso de facturación de servicios de nube,
              calculando costos basados en el tiempo de uso de cada recurso
              aprovisionado.
            </p>
          </div>
        </div>
      </div>

      <!-- 2. Arquitectura -->
      <div
        id="arquitectura"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
            />
          </svg>
          <span>2. Arquitectura</span>
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Backend -->
          <div class="bg-slate-700 rounded-lg p-4 border border-slate-600">
            <div class="flex items-center space-x-2 mb-3">
              <svg
                class="w-6 h-6 text-green-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"
                />
              </svg>
              <h3 class="font-semibold text-green-400">Backend (Flask)</h3>
            </div>
            <ul class="text-sm text-slate-300 space-y-1">
              <li>• Framework: Flask 2.2.5</li>
              <li>• Puerto: 5001</li>
              <li>• API REST con 15+ endpoints</li>
              <li>• Almacenamiento: XML</li>
              <li>• Reportes: ReportLab PDF</li>
            </ul>
          </div>

          <!-- Frontend -->
          <div class="bg-slate-700 rounded-lg p-4 border border-slate-600">
            <div class="flex items-center space-x-2 mb-3">
              <svg
                class="w-6 h-6 text-blue-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                />
              </svg>
              <h3 class="font-semibold text-blue-400">Frontend (Django)</h3>
            </div>
            <ul class="text-sm text-slate-300 space-y-1">
              <li>• Framework: Django 4.2.10</li>
              <li>• Puerto: 8000</li>
              <li>• Patrón: MVT (Model-View-Template)</li>
              <li>• Estilos: Tailwind CSS</li>
              <li>• 18+ vistas funcionales</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 3. Funcionalidades -->
      <div
        id="funcionalidades"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
            />
          </svg>
          <span>3. Funcionalidades Principales</span>
        </h2>

        <!-- Semana 1-2 -->
        <div class="mb-6">
          <h3 class="text-lg font-semibold text-slate-100 mb-3">
            Semana 1-2: Funcionalidades Base
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-blue-300 mb-2">
                Carga de Configuraciones
              </h4>
              <p class="text-sm text-slate-300">
                Permite cargar archivos XML con recursos, categorías,
                configuraciones y clientes del sistema.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-blue-300 mb-2">
                Carga de Consumos
              </h4>
              <p class="text-sm text-slate-300">
                Procesa archivos XML con registros de consumo de instancias para
                facturación.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-blue-300 mb-2">
                Consulta de Datos
              </h4>
              <p class="text-sm text-slate-300">
                Visualiza recursos, categorías, configuraciones, clientes e
                instancias registradas.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-blue-300 mb-2">Inicialización</h4>
              <p class="text-sm text-slate-300">
                Limpia la base de datos XML para iniciar pruebas desde cero.
              </p>
            </div>
          </div>
        </div>

        <!-- Semana 3 -->
        <div class="mb-6">
          <h3 class="text-lg font-semibold text-slate-100 mb-3">
            Semana 3: Facturación y CRUD
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-green-300 mb-2">
                Facturación Automática
              </h4>
              <p class="text-sm text-slate-300">
                Genera facturas por rango de fechas calculando: cantidad ×
                costo/hora × horas.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-green-300 mb-2">
                CRUD Recursos/Categorías
              </h4>
              <p class="text-sm text-slate-300">
                Crear, consultar, actualizar y eliminar recursos y categorías
                del sistema.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-green-300 mb-2">
                CRUD Clientes/Instancias
              </h4>
              <p class="text-sm text-slate-300">
                Gestión completa de clientes y sus instancias aprovisionadas.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-green-300 mb-2">
                Cancelar Instancias
              </h4>
              <p class="text-sm text-slate-300">
                Marcar instancias como canceladas estableciendo fecha de fin y
                estado.
              </p>
            </div>
          </div>
        </div>

        <!-- Semana 4 -->
        <div>
          <h3 class="text-lg font-semibold text-slate-100 mb-3">
            Semana 4: Reportes PDF
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-yellow-300 mb-2">
                Reporte de Factura
              </h4>
              <p class="text-sm text-slate-300">
                PDF detallado con datos del cliente, instancias, recursos y
                totales por factura.
              </p>
            </div>
            <div class="bg-slate-700 rounded-lg p-4">
              <h4 class="font-semibold text-yellow-300 mb-2">
                Análisis de Ventas
              </h4>
              <p class="text-sm text-slate-300">
                PDF con análisis de ingresos por categorías/configuraciones o
                por recursos.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- 4. API Endpoints -->
      <div
        id="api"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
            />
          </svg>
          <span>4. API Endpoints</span>
        </h2>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-slate-700">
                <th class="text-left py-2 px-3 text-slate-300">Método</th>
                <th class="text-left py-2 px-3 text-slate-300">Endpoint</th>
                <th class="text-left py-2 px-3 text-slate-300">Descripción</th>
              </tr>
            </thead>
            <tbody class="text-slate-300">
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-blue-600 px-2 py-1 rounded text-xs"
                    >POST</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/cargar/configuracion</td>
                <td class="py-2 px-3">Carga archivo XML de configuración</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-blue-600 px-2 py-1 rounded text-xs"
                    >POST</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/cargar/consumo</td>
                <td class="py-2 px-3">Carga archivo XML de consumos</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-green-600 px-2 py-1 rounded text-xs"
                    >GET</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/consultar</td>
                <td class="py-2 px-3">Obtiene todos los datos del sistema</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-blue-600 px-2 py-1 rounded text-xs"
                    >POST</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/facturar</td>
                <td class="py-2 px-3">Genera facturas por rango de fechas</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-green-600 px-2 py-1 rounded text-xs"
                    >GET</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/facturas</td>
                <td class="py-2 px-3">Lista todas las facturas generadas</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-green-600 px-2 py-1 rounded text-xs"
                    >GET</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/reporte/factura/&lt;id&gt;</td>
                <td class="py-2 px-3">Genera PDF de detalle de factura</td>
              </tr>
              <tr class="border-b border-slate-700">
                <td class="py-2 px-3">
                  <span class="bg-blue-600 px-2 py-1 rounded text-xs"
                    >POST</span
                  >
                </td>
                <td class="py-2 px-3 font-mono">/reporte/ventas</td>
                <td class="py-2 px-3">Genera PDF de análisis de ventas</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- 5. Formatos XML -->
      <div
        id="formatos"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
            />
          </svg>
          <span>5. Formatos XML</span>
        </h2>

        <div class="space-y-4">
          <!-- Configuración -->
          <div>
            <h3 class="text-lg font-semibold text-slate-100 mb-2">
              Archivo de Configuración
            </h3>
            <div class="bg-slate-900 rounded-lg p-4 overflow-x-auto">
              <pre
                class="text-green-400 text-xs"
              ><code>&lt;archivoConfiguraciones&gt;
  &lt;listaRecursos&gt;
    &lt;recurso id="1"&gt;
      &lt;nombre&gt;Memoria RAM&lt;/nombre&gt;
      &lt;metrica&gt;GiB&lt;/metrica&gt;
      &lt;valorXhora&gt;0.75&lt;/valorXhora&gt;
    &lt;/recurso&gt;
  &lt;/listaRecursos&gt;
  &lt;listaCategorias&gt;...&lt;/listaCategorias&gt;
  &lt;listaClientes&gt;...&lt;/listaClientes&gt;
&lt;/archivoConfiguraciones&gt;</code></pre>
            </div>
          </div>

          <!-- Consumos -->
          <div>
            <h3 class="text-lg font-semibold text-slate-100 mb-2">
              Archivo de Consumos
            </h3>
            <div class="bg-slate-900 rounded-lg p-4 overflow-x-auto">
              <pre class="text-green-400 text-xs"><code>&lt;listadoConsumos&gt;
  &lt;consumo nitCliente="12345-6" idInstancia="1"&gt;
    &lt;tiempo&gt;2.5&lt;/tiempo&gt;
    &lt;fechaHora&gt;15/01/2025 14:30&lt;/fechaHora&gt;
  &lt;/consumo&gt;
&lt;/listadoConsumos&gt;</code></pre>
            </div>
          </div>
        </div>
      </div>

      <!-- 6. Reportes -->
      <div
        id="reportes"
        class="mb-8 bg-slate-800 rounded-lg shadow-xl border border-slate-700 p-6"
      >
        <h2
          class="text-2xl font-semibold text-blue-400 mb-4 flex items-center space-x-3"
        >
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
            />
          </svg>
          <span>6. Reportes PDF</span>
        </h2>

        <div class="space-y-4">
          <div class="bg-slate-700 rounded-lg p-4">
            <h4 class="font-semibold text-yellow-300 mb-2">
              Detalle de Factura
            </h4>
            <p class="text-sm text-slate-300 mb-2">Incluye:</p>
            <ul class="text-sm text-slate-300 space-y-1 ml-4">
              <li>
                • Datos completos del cliente (nombre, NIT, dirección, email)
              </li>
              <li>• Información de la factura (número, fecha, NIT)</li>
              <li>
                • Detalle por instancia: nombre, recursos consumidos, horas
              </li>
              <li>• Cálculo por recurso: cantidad × costo/hora × horas</li>
              <li>• Subtotales por instancia</li>
              <li>• Total general a pagar</li>
            </ul>
          </div>

          <div class="bg-slate-700 rounded-lg p-4">
            <h4 class="font-semibold text-yellow-300 mb-2">
              Análisis de Ventas
            </h4>
            <p class="text-sm text-slate-300 mb-2">Dos tipos de análisis:</p>
            <ul class="text-sm text-slate-300 space-y-1 ml-4">
              <li>
                <strong>Por Categorías/Configuraciones:</strong> Muestra qué
                configuraciones generan más ingresos
              </li>
              <li>
                <strong>Por Recursos:</strong> Muestra qué recursos (RAM, CPU,
                etc.) son más rentables
              </li>
              <li>• Incluye ingresos totales y porcentaje de contribución</li>
              <li>• Ordenado de mayor a menor ingreso</li>
              <li>• Período de análisis personalizable</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Back to Help -->
      <div class="flex justify-center">
        <a
          href="{% url 'help' %}"
          class="flex items-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            />
          </svg>
          <span>Volver a Ayuda</span>
        </a>
      </div>
    </div>
  </body>
</html>
